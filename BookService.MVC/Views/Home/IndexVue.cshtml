@{
    ViewBag.Title = "Books with Vue.js";
}

<h2>@ViewBag.Title</h2>

<article id="app" class="row">
    <header class="col-md-4">
        <h3>{{ message }}</h3>   @*Vue mustache*@
        <nav>
            <ul class="list-group">
                <li class="list-group-item" v-for="book in books" v-on:click="fetchBookDetails(book)">
                    <span class="bookTitle">{{ book.title }}</span>
                </li>
            </ul>
        </nav>
    </header>
</article>



@section scripts{
    <script src="~/js/vue.js"></script>
    <script>
        var apiURL = 'https://localhost:44396/api/books/basic';

        var app = new Vue({
            el: '#app',
            data: {
                message: 'Loading books...',
                books: null
            },
            created: function () {
                var self = this;
                self.fetchBooks();
            },
            methods: {
                fetchBooks: function () {
                    var self = this;
                    fetch(`${apiURL}`)
                        .then(res => res.json())
                        .then(function (books) {
                            self.books = books;
                            self.message = 'Overview';
                        })
                        .catch(err => console.error('fout:' + err));
                },
                fetchBookDetails: function (book) {
                    alert(book.title);
                    console.log('Dank je om op boek ' + book.title + ' te klikken!');
                },
            }
        });
    </script>
}


